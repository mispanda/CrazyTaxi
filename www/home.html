<ons-navigator title="Navigator" var="homeNavigator">
  
    <ons-page>
		<ons-tabbar position="bottom" var="tabbar">
			<ons-tabbar-item page="page1.html" icon="fa-home" active="true" onClick="tabClick('首頁')"></ons-tabbar-item>
            <ons-tabbar-item page="page2.html" icon="fa-users" onClick="tabClick('刊登共乘')"></ons-tabbar-item>
            <ons-tabbar-item icon="fa-phone" onClick="tabClick('叫車')"></ons-tabbar-item>
    		<ons-tabbar-item page="page4.html" icon="fa-question" onClick="tabClick('活動說明')"></ons-tabbar-item>
            <ons-tabbar-item icon="fa-facebook-square" onClick="tabClick('官方粉絲團')"></ons-tabbar-item>
		</ons-tabbar>
	</ons-page>
    
</ons-navigator>    

<script>
    
function tabClick(pageName) {
  
    switch(pageName) {
    case "首頁":                                    break;
    case "刊登共乘":                                break;
    case "叫車":                page3_click();      break;
    case "活動說明":                                break;
    case "官方粉絲團":          page5_click();      break;
    case "播打電話 叫車":       call_55688();       break;
    case "開啟55688 APP 叫車":  call_app();         break;
    }

    ga('send', 'event', '功能列', 'click', pageName);
}

function page3_click() {

    var message = ""
    message +=  '<div class="pop_message">';
    message +=  '<section class="section1">';
    message +=      "<ons-button class='button button--large' modifier='chevron' onclick='tabClick(\"播打電話 叫車\")' style='background:#36d0c9; border-radius:0;'>";
    message +=          '<span style="font-size:18px">播打電話 叫車</span>';
    message +=      '</ons-button>';
    message +=  '</section>';
    message +=  '<section class="section1">';
    message +=      "<ons-button class='button button--large' modifier='chevron' onclick='tabClick(\"開啟55688 APP 叫車\")' style='background:#36d0c9; border-radius:0;'>";
    message +=          '<span style="font-size:18px">開啟55688 APP 叫車</span>';
    message +=      '</ons-button>';
    message +=  '</section>';
    message +=  '<section class="section1">';
    message +=      '<ons-button class="button button--large" modifier="chevron" onclick="HoldOn.close()" style="background:#adadad; border-radius:0;">';
    message +=          '<span style="font-size:18px">取消</span>';
    message +=      '</ons-button>';
    message +=  '</section>';
    message +=  '</div>';
        
    var options = {
        theme: "custom",
        message: message,
        textColor: "white"
    };

    HoldOn.open(options);
}
    
function call_app() {
    
    if(ons.platform.isIOS()) {
        window.open("https://itunes.apple.com/tw/app/tai-wan-da-che-dui-55688/id579255069?mt=8");
    } else {
        window.open("https://play.google.com/store/apps/details?id=dbx.taiwantaxi&hl=zh_TW");
    }
}
    
function gotoPage1() {

    HoldOn.open({message:"定位中，請稍候"});
    tabbar.setActiveTab(0);
}

function needLogin() {

    alertDialog.destroy();
    //homeNavigator.pushPage("login.html", {animation: 'lift'});
     
FB.login(function(response) {
       if (response.session) {
         if (response.perms) {
          //使用者已登入Facebook成功，且已授權你的應用程式存取
            console.log("使用者已登入Facebook成功，且已授權你的應用程式存取");
            //checkLoginState();
         } else {
           //使用者已登入Facebook成功，但未授權你的應用程式存取
           console.log("使用者已登入Facebook成功，但未授權你的應用程式存取");
         }
       } else {
         //使用者未登入成功
         console.log("使用者未登入成功");
       }
       
       location.reload();
     }, {perms:'public_profile,email'}); //設定需要授權的項目
     
    //gotoPage1();
    //menu.openMenu();
}
</script>